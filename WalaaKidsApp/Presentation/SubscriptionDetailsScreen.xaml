<UserControl x:Class="WalaaKidsApp.Presentation.SubscriptionDetailsScreen"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:WalaaKidsApp.Presentation"
             mc:Ignorable="d" 
             x:Name="SubscriptionDetailsUserControl"
              FlowDirection="RightToLeft"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch"
              Background="Transparent"
              Opacity="1"
              d:Opacity="1"
              d:DesignWidth="800" d:DesignHeight="800"
              d:Background="#eff2f7"
             Loaded="SubscriptionDetailsUserControl_Loaded"
             Unloaded="SubscriptionDetailsUserControl_Unloaded">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>
        <GroupBox BorderThickness="2" Grid.Row="0" Header="تفاصيل الاشتراك" FontSize="15">
            <GroupBox.BorderBrush>
                <LinearGradientBrush>
                    <GradientStop Color="#662D8C" Offset="1"/>
                    <GradientStop Color="#ED1E79" Offset=".1"/>
                </LinearGradientBrush>
            </GroupBox.BorderBrush>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                </Grid.RowDefinitions>
                <TextBlock Style="{StaticResource InputLabel}" Text="قيمة الاشتراك:"
                           HorizontalAlignment="Right"
                           FontSize="15"
                           Grid.Row="0" Grid.Column="0"
                           />
                <TextBlock x:Name="SubscriptionAmountTextBlock" Style="{StaticResource InputLabel}" d:Text="12000" 
                           HorizontalAlignment="Left"
                           FontSize="15"
                           Grid.Row="0" Grid.Column="1"
                           />
                <TextBlock Style="{StaticResource InputLabel}" Text="تاريخ الاشتراك:" 
            HorizontalAlignment="Right"
            FontSize="15"
            Grid.Row="1" Grid.Column="0"
            />
                <TextBlock x:Name="SubscriptionDateTextBlock" Style="{StaticResource InputLabel}" d:Text="30-06-2025" 
            HorizontalAlignment="Left"
            FontSize="15"
            Grid.Row="1" Grid.Column="1"
            />
                <TextBlock Style="{StaticResource InputLabel}" Text="تاريخ انتهاء الاشتراك:" 
            HorizontalAlignment="Right"
            FontSize="15"
            Grid.Row="3" Grid.Column="0"
            />
                <TextBlock x:Name="ExpiryDateTextBlock" Style="{StaticResource InputLabel}" d:Text="30-06-2025" 
            HorizontalAlignment="Left"
            FontSize="15"
            Grid.Row="3" Grid.Column="1"
            />
                <TextBlock Style="{StaticResource InputLabel}" Text="مبالغ متبقية:" 
                 HorizontalAlignment="Right"
                 FontSize="15"
                 Grid.Row="0" Grid.Column="2"
                 />
                <TextBlock x:Name="AmountDueTextBlock" Style="{StaticResource InputLabel}" d:Text="2000" 
                           Text="{Binding AmountDue}"
                 HorizontalAlignment="Left" Foreground="Red" FontStyle="Oblique"
                 FontSize="15"
                 Grid.Row="0" Grid.Column="3"
                 />
                <TextBlock Style="{StaticResource InputLabel}" Text="نوع الاشتراك:" 
                HorizontalAlignment="Right"
                FontSize="15"
                Grid.Row="1" Grid.Column="2"
                />
                <TextBlock x:Name="SubscriptionTypeTextBlock" Style="{StaticResource InputLabel}" d:Text="سنوى" 
                HorizontalAlignment="Left"
                FontSize="15"
                Grid.Row="1" Grid.Column="3"
                />
            </Grid>
        </GroupBox>
        <GroupBox BorderThickness="2" Margin="0 10 0 0" Grid.Row="1" Header="الدفعات السابقة" FontSize="15">
            <GroupBox.BorderBrush>
                <LinearGradientBrush>
                    <GradientStop Color="#662D8C" Offset="1"/>
                    <GradientStop Color="#ED1E79" Offset=".1"/>
                </LinearGradientBrush>
            </GroupBox.BorderBrush>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="250"/>
                </Grid.ColumnDefinitions>
                <ListView x:Name="PaymentsList" Grid.Column="0" Height="100" Margin="10,10,0,0" Width="500" HorizontalAlignment="Left" VerticalAlignment="Top"
                          ItemsSource="{Binding Payments}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="التاريخ" Width="auto" DisplayMemberBinding="{Binding LocalPaymentDateOnly}"/>
                            <GridViewColumn Header="القيمة" Width="auto" DisplayMemberBinding="{Binding PaymentAmount}"/>
                        </GridView>
                    </ListView.View>
                </ListView>
                <StackPanel Margin="5 80 0 0" Orientation="Horizontal"  Grid.Column="1" HorizontalAlignment="Left" >
                    <TextBlock FontWeight="ExtraBold"  Text="اجمالي المدفوع: "  />
                    <TextBlock Name="TotalTextBlock"  d:Text="2000" Foreground="Green" FontWeight="ExtraBold" Margin="4 0 0 0"/>
                </StackPanel>



            </Grid>
        </GroupBox>
        <GroupBox BorderThickness="2" Margin="0 10 0 0" Grid.Row="2" Header="سداد مبلغ" FontSize="15">
            <GroupBox.BorderBrush>
                <LinearGradientBrush>
                    <GradientStop Color="#662D8C" Offset="1"/>
                    <GradientStop Color="#ED1E79" Offset=".1"/>
                </LinearGradientBrush>
            </GroupBox.BorderBrush>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Style="{StaticResource InputLabel}"
                           Text="التاريخ :" HorizontalAlignment="Right"
                           VerticalAlignment="Center" Grid.Column="0" Grid.Row="0"/>
                <DatePicker Name="PaymentDateBox" Width="140" Grid.Row="0" Grid.Column="1" 
                            HorizontalAlignment="Left" Padding="3" Margin="0 5"
                            VerticalAlignment="Center" SelectedDate="{Binding PaymentDate}"/>
                <TextBlock Style="{StaticResource InputLabel}"
                       Text="المبلغ :" HorizontalAlignment="Right"
                       VerticalAlignment="Center" Grid.Column="0" Grid.Row="1"/>
                <TextBox x:Name="PaymentAmountBox" Width="140" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Left" 
                         Margin="0 5 10 0" Text="{Binding PaymentAmount}"/>
                <Button Style="{StaticResource ContentButton}"
                        Content="سداد" Name="RegisterPaymentButton"
                        Grid.Row="1" Grid.Column="2"
                        Width="100" Height="30" Margin="0,6,0,0" HorizontalAlignment="Center" VerticalAlignment="Top" Click="RegisterPaymentButton_Click"/>

            </Grid>
        </GroupBox>
               <Button Style="{StaticResource ContentButton}"
               Content="الغاء الاشتراك" Name="CancelSubscriptionButton"
               Grid.Row="3" Grid.Column="2" HorizontalAlignment="Left"
               Width="150" Height="35" Margin="10" Click="CancelSubscriptionButton_Click"/>
    </Grid>

</UserControl>
